<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · MuxDisplay.jl</title><meta name="title" content="API · MuxDisplay.jl"/><meta property="og:title" content="API · MuxDisplay.jl"/><meta property="twitter:title" content="API · MuxDisplay.jl"/><meta name="description" content="Documentation for MuxDisplay.jl."/><meta property="og:description" content="Documentation for MuxDisplay.jl."/><meta property="twitter:description" content="Documentation for MuxDisplay.jl."/><meta property="og:url" content="https://goerz.github.io/MuxDisplay.jl/api/"/><meta property="twitter:url" content="https://goerz.github.io/MuxDisplay.jl/api/"/><link rel="canonical" href="https://goerz.github.io/MuxDisplay.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MuxDisplay.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../background/">Background</a></li><li><a class="tocitem" href="../scenarios/">Scenarios</a></li><li><a class="tocitem" href="../howto/">Howto</a></li><li class="is-active"><a class="tocitem" href>API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/goerz/MuxDisplay.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/goerz/MuxDisplay.jl/blob/master/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><p>The following functions constitute the public interface of the <code>MuxDisplay</code> package:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.enable" href="#MuxDisplay.enable"><code>MuxDisplay.enable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Enable display via <code>MuxDisplay</code></p><pre><code class="language-julia hljs">MuxDisplay.enable(;
    multiplexer = :tmux,
    target_pane,  # mandatory keyword argument
    verbose = true,
    tmpdir = mktempdir(),
    mux_bin = &lt;&quot;tmux&quot; | &quot;wezterm&quot;&gt;
    nrows = 1,
    clear = MuxDisplay.needs_clear(Val(multiplexer)),
    smart_size = true,
    scale = 1.0,
    shell = &quot;&quot;,
    use_pixels = false,
    redraw_previous = (clear ? (nrows - 1) : 0),
    imgcat = &quot;&quot;,
    dry_run = false,
    only_write_files = false,
    use_filenames_as_title = false,
    sleep_secs = &lt;automatic&gt;,
    cell_size = (0, 0),
)</code></pre><p>enables <a href="https://docs.julialang.org/en/v1/base/io-network/#Multimedia-I/O">Julia&#39;s builtin display system</a> to show objects that have an <code>image/png</code> or <code>image/jpeg</code> representation the pane of a terminal multiplexer pane, relying on a suitable terminal emulator&#39;s ability to render images. This works by writing the data to a file in a temporary directory and then calling a suitable <code>imgcat</code> program to show that file in the terminal.</p><p><strong>Arguments</strong></p><ul><li><p><code>multiplexer</code>: The terminal multiplex to use for displaying graphics. One of <code>:tmux</code>, <code>:wezterm</code>.</p></li><li><p><code>target_pane</code>: A specification for which multiplexer pane to use as a display.  If the <code>multiplexer</code> is <code>:tmux</code>, this can either be an integer indicating a pane in the current tmux window, or a specification of the form <code>&quot;session:window.pane&quot;</code> to use a pane in an arbitrary window of a running tmux session. See The pane number can be obtained by running <code>tmux display -p &#39;#{pane_index}&#39;</code> in a particular pane (or via the <code>C-b q</code> shortcut) . If the <code>multiplexer</code> is <code>:wezterm</code>, this should be the WezTerm pane id, which can be obtained from the <code>WEZTERM_PANE</code> environment variable inside that pane.</p></li><li><p><code>mux_bin</code>: The executable for the multiplexer, <code>&quot;tmux&quot;</code> if <code>multiplexer</code> is <code>:tmux</code>, and <code>&quot;wezterm&quot;</code> if <code>multiplexer</code> is <code>:wezterm</code>. This can be set to an absolute path if the executable is not in the shell&#39;s <code>PATH</code>.</p></li><li><p><code>verbose</code>: If <code>true</code>, show information about the display that is being activated.</p></li><li><p><code>tmpdir</code>: The directory to which to write the temporary files for each invocation of <code>display</code>. The files will be consecutively numbered, e.g., <code>001.png</code>, <code>002.png</code>, etc. The default <code>mktempdir()</code> results in a directory that is automatically deleted on exit. Passing an existing directory will cause the image files to persist in that folder.</p></li><li><p><code>imgcat</code>: The command to be used for displaying an image file. It should contain any of the following placeholder strings, which will be substituted before executing the command:</p><ul><li><code>{file}</code>: The absolute path to the temporary image file</li><li><code>{height}</code>: The number of rows in the terminal reserved for drawing the image. This is generally the height of the output terminal window, divided by <code>nrows</code>, and some buffer space for printing titles.</li><li><code>{width}</code>: The number of columns in the terminal reserved for drawing the image. If <code>smart_size=true</code>, then <code>{width}</code> may be replaced with the string <code>auto</code> in situations where the aspect ratio of the image is such that drawing it with a specific width would overflow the available <code>height</code>. This accounts for the behavior in iTerms&#39;s inline graphics protocol where <code>height</code> is ignored if a specific <code>width</code> is given.</li><li><code>{pixel_height}</code>: The pixel height of the temporary image file, multiplied with <code>scale</code>. This does not include a &quot;px&quot; suffix.</li><li><code>{pixel_width}</code>: The pixel width of the temporary image file, multiplied by <code>scale</code>.</li></ul><p>If given as an empty string (default), <code>MuxDisplay</code> will attempt to find an available executable and choose parameters based on heuristics. It will attempt to use either the <code>wezterm imgcat</code> command or iTerm&#39;s <code>imgcat</code> script. The <code>smart_size</code>, <code>nrows</code>, and <code>use_pixels</code> arguments affect the default <code>imgcat</code> command.</p></li><li><p><code>nrows</code>: The number of image rows that should fit into the pane. This affects the <code>{width}</code> and <code>{height}</code> placeholders in <code>imgcat</code>.</p></li><li><p><code>clear</code>: Whether to issue a <code>clear</code> command to the target pane before display. By default, this is chosen based on the multiplexer (<code>true</code> for <code>:tmux</code>, <code>false</code> for <code>:wezterm</code>)</p></li><li><p><code>smart_size</code>: If <code>true</code>, the <code>{width}</code> placeholder in <code>imgcat</code> may be replaced with <code>&quot;auto&quot;</code> if the image is determined to require a strict height constraint. This depends on an accurate <code>cell_size</code> (at least a <code>cell_size</code> with the correct aspect ratio). With the default <code>imgcat</code>, this option will not affect the output if <code>use_pixels=true</code>.</p></li><li><p><code>scale</code>: A scaling factor for the pixel dimensions of the image, used for the <code>{pixel_height}</code> and <code>{pixel_width}</code> placeholders in <code>imgcat</code>. A primary use case is <code>scale=2.0</code> to compensate for terminal applications that do not take into account running on a 2x &quot;retina resolution&quot; display. Note that <code>scale</code> does not scale the underlying image and has no effect if <code>imgcat</code> does not use the pixel-size placeholders, cf. <code>use_pixels</code>.</p></li><li><p><code>shell</code>: The shell running in the target pane. This determines how the pane is initialized (disabling the prompt, etc.) and reset. If empty, this will determined automatically by queriying the multiplexer for the process running in the pane, with a fallback to <code>&quot;bash&quot;</code>.</p></li><li><p><code>use_pixels</code>: If <code>true</code>, default to an <code>imgcat</code> command that uses the pixel dimensions of the image, i.e., the <code>{pixel_height}</code> and <code>{pixel_width}</code> placeholders instead of the <code>{height}</code> and <code>{width}</code> placeholders. This may be combined with <code>scale</code>. A consequence of <code>use_pixels=true</code> is that the images will be displayed at their fixed original size, which may overflow the number of rows and columns available in the terminal.</p><p>This option has no effect if <code>imgcat</code> is given manually, as it only determines the specific options used for calling iTerm&#39;s <code>imgcat</code> command or <code>wezterm imgcat</code>.</p></li><li><p><code>redraw_previous</code>: If set to an integer &gt; 1, for each call to <code>display</code>, first redraw the given number of previous images. This accounts for the lack of scrollback in tmux, allowing to compare the current image with previous images. If using this option, it is recommended to also use <code>clear = true</code>.</p></li><li><p><code>dry_run</code>: If true, to not write any files and do not display any images. To be used for debugging in combination with <code>ENV[&quot;JULIA_DEBUG&quot;] = MuxDisplay</code></p></li><li><p><code>only_write_files</code>: If true, write image files to <code>tempdir</code>, but do not display them in the target pane. This allows to use <code>MuxDisplay</code> without an actual multiplexer running, under the assumption that the image files can be viewed independently.</p></li><li><p><code>use_filenames_as_title</code>: If true, print the filename of the temporary file before rendering the image. Note that more descriptive titles can be used by calling <a href="#MuxDisplay.display"><code>MuxDisplay.display</code></a>.</p></li><li><p><code>sleep_secs</code>: The number of seconds to sleep after drawing each image. This defaults to a heuristic value. If <code>multiplexer=:tmux</code>, and <code>target_pane</code> is a pane in the current window, <code>MuxDisplay</code> needs to actively switch to the target pane, issue the <code>imgcat</code> command, wait for the image to render, and then switch back to the current pane. If <code>sleep_secs</code> to too short so that switching back to the current pane happens before the rendering is complete, the image will be shown in the wrong place. Also, when using <code>redraw_previous</code> to draw multiple images, there may need be be a delay for on image to finish rendering before issuing the command to draw the next image. Typical values are on the order of 0.2-0.5 seconds, possibly longer on laggy connections.</p></li><li><p><code>cell_size</code>: A tuple of for the height and width in pixels of a single cell (character) in the terminal. If given as the default <code>(0, 0)</code>, this will be automatically determined by sending the &quot;16t&quot; xterm control sequence to the terminal. This could also be determined manually be dividing the pixel size of the terminal window by its size (columns, rows). Only the ratio of height to width matters here, and for many monospaced fonts, this is roughly 2:1. The <code>cell_size</code> is used for the <code>smart_size</code> option.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/MuxDisplay.jl#L8-L167">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.enabled" href="#MuxDisplay.enabled"><code>MuxDisplay.enabled</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Check whether MuxDisplay is active.</p><pre><code class="nohighlight hljs">MuxDisplay.enabled(; verbose=true)</code></pre><p>returns <code>true</code> if the currently active display (<code>Base.Multimedia.displays[end]</code>) is provided by <code>MuxDisplay</code>. If <code>verbose=true</code>, also show some information about the configuration of the display.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/MuxDisplay.jl#L214-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.set_options" href="#MuxDisplay.set_options"><code>MuxDisplay.set_options</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Modify an active display.</p><pre><code class="nohighlight hljs">MuxDisplay.set_options(; verbose, kwargs...)</code></pre><p>overrides the keyword arguments originally given in <a href="#MuxDisplay.enable"><code>MuxDisplay.enable</code></a> for the currently active display for all future invocations of <code>display</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/MuxDisplay.jl#L239-L249">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.display" href="#MuxDisplay.display"><code>MuxDisplay.display</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Show an object with a custom title and other options.</p><pre><code class="nohighlight hljs">MuxDisplay.display(x; title=&quot;&quot;, kwargs...)</code></pre><p>shows <code>x</code> (which must have a <code>image/png</code> or <code>image/jpeg</code> representation) on the current display, after printing the given <code>title</code> (in lieu of the filename if the display was set up with <code>use_filenames_as_title = true</code>). Additional keyword arguments can be <code>clear</code>, <code>nrows</code>, <code>redraw_previous</code>, <code>imgcat</code>, and <code>use_filenames_as_title</code>, and temporarily override the corresponding options in the display.</p><p>Note that this is a different function than <code>Base.display</code>, which does not take keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/MuxDisplay.jl#L301-L317">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.disable" href="#MuxDisplay.disable"><code>MuxDisplay.disable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Disable using <code>MuxDisplay</code> as the current display.</p><pre><code class="language-julia hljs">MuxDisplay.disable(; verbose = true)</code></pre><p>disables the current display if it is managed by <code>MuxDisplay</code>. With <code>verbose=true</code>, also print some information about the settings of the deactivated system, or a warning if the current display is not managed by <code>MuxDisplay</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/MuxDisplay.jl#L272-L283">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MuxDisplay.install_cellsize" href="#MuxDisplay.install_cellsize"><code>MuxDisplay.install_cellsize</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Compile the <code>cellsize</code> program from C-source</p><pre><code class="language-julia hljs">install_cellsize(path=&quot;~/bin&quot;; cc=&quot;cc&quot;, write_source=false)</code></pre><p>produces the executable <code>cellsize</code> inside the given <code>path</code> folder by compiling C source with the <code>cc</code> compiler.</p><p>The resulting executable can be called as</p><pre><code class="nohighlight hljs">cellsize OUTFILE</code></pre><p>and writes the pixel size of a cell (character) to <code>OUTFILE</code> in the format <code>HEIGHTxWIDTH</code>, where <code>HEIGHT</code> and <code>WIDTH</code> are integers. If called without <code>OUTFILE</code>, write to stdout.</p><p>If <code>write_source</code> is given as <code>true</code>, write the C source code for the <code>cellsize</code> executable to <code>cellsize.c</code> inside <code>path</code>, but do not compile it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/goerz/MuxDisplay.jl/blob/0d44e559c59d813ef21a32fd8e0b6352d7f73921/src/shells.jl#L125-L148">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../howto/">« Howto</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/goerz/MuxDisplay.jl">MuxDisplay.jl</a> v0.1.0-dev docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Sunday 20 October 2024 02:42">Sunday 20 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
